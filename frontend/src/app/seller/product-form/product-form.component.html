<app-seller-navbar></app-seller-navbar>

<div class="min-h-screen bg-gray-50 py-8">
  <div class="container mx-auto px-4">
    <div class="max-w-3xl mx-auto">
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">{{isEditMode ? 'Edit Product' : 'Add New Product'}}</h1>
        <p class="text-gray-600">{{isEditMode ? 'Update your product information' : 'Add a new product to your inventory'}}</p>
      </div>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="card">
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium mb-1">Product Name *</label>
          <input formControlName="name" type="text" class="input-field" placeholder="Enter product name">
          <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched" 
               class="text-red-500 text-sm mt-1">
            <span *ngIf="productForm.get('name')?.errors?.['required']">Product name is required</span>
            <span *ngIf="productForm.get('name')?.errors?.['minlength']">Product name must be at least 3 characters</span>
            <span *ngIf="productForm.get('name')?.errors?.['maxlength']">Product name cannot exceed 200 characters</span>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1">Description *</label>
          <textarea formControlName="description" rows="4" class="input-field" 
                    placeholder="Enter product description"></textarea>
          <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched" 
               class="text-red-500 text-sm mt-1">
            <span *ngIf="productForm.get('description')?.errors?.['required']">Description is required</span>
            <span *ngIf="productForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters</span>
            <span *ngIf="productForm.get('description')?.errors?.['maxlength']">Description cannot exceed 2000 characters</span>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium mb-1">Price (₹) *</label>
            <input formControlName="price" type="number" step="0.01" class="input-field" placeholder="0.00">
            <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched" 
                 class="text-red-500 text-sm mt-1">
              <span *ngIf="productForm.get('price')?.errors?.['required']">Price is required</span>
              <span *ngIf="productForm.get('price')?.errors?.['min']">Price must be greater than 0</span>
              <span *ngIf="productForm.get('price')?.errors?.['max']">Price cannot exceed ₹1,000,000</span>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">Stock *</label>
            <input formControlName="stock" type="number" class="input-field" placeholder="0">
            <div *ngIf="productForm.get('stock')?.invalid && productForm.get('stock')?.touched" 
                 class="text-red-500 text-sm mt-1">
              <span *ngIf="productForm.get('stock')?.errors?.['required']">Stock is required</span>
              <span *ngIf="productForm.get('stock')?.errors?.['min']">Stock cannot be negative</span>
              <span *ngIf="productForm.get('stock')?.errors?.['max']">Stock cannot exceed 100,000</span>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium mb-1">Category *</label>
            <select formControlName="category" (change)="onCategoryChange()" class="input-field">
              <option value="">Select category</option>
              <option *ngFor="let cat of categories" [value]="cat">{{cat | titlecase}}</option>
              <option value="new">+ Add New Category</option>
            </select>
            <div *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched" 
                 class="text-red-500 text-sm mt-1">Category is required</div>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">Brand</label>
            <input formControlName="brand" type="text" class="input-field" placeholder="Enter brand name">
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1">Image URLs (comma-separated)</label>
          <input formControlName="images" type="text" class="input-field" 
                 placeholder="https://example.com/image1.jpg, https://example.com/image2.jpg">
          <p class="text-sm text-gray-500 mt-1">Enter multiple image URLs separated by commas</p>
        </div>

        <div class="flex items-center">
          <input formControlName="isActive" type="checkbox" id="isActive" 
                 class="w-4 h-4 text-primary-600 rounded">
          <label for="isActive" class="ml-2 text-sm font-medium">Product is active</label>
        </div>
      </div>

      <div class="flex space-x-4 mt-8 pt-6 border-t">
        <button type="submit" [disabled]="loading || productForm.invalid" class="btn-primary flex-1">
          {{loading ? 'Saving...' : (isEditMode ? 'Update Product' : 'Create Product')}}
        </button>
        <button type="button" (click)="router.navigate(['/seller/products'])" class="btn-secondary flex-1">
          Cancel
        </button>
      </div>
      </form>
    </div>
  </div>
</div>
